<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<meta name="theme-color" content="#f58220"/>
<link rel="manifest" href="manifest.json">
<title>LOG20 – Operação Vidros — Checklist Diário</title>
<style>
:root{--brand:#f58220;--bg:#0b0b0b;--card:#121212;--muted:#ccc;--ok:#28a745;--no:#dc3545}
html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;-webkit-font-smoothing:antialiased;}
.header{background:var(--brand);padding:12px 10px;color:#08120a;font-weight:800;text-align:center;font-size:18px;display:flex;align-items:center;gap:8px;justify-content:center}
.header img{height:44px;border-radius:6px;box-shadow:0 2px 6px rgba(0,0,0,0.2)}
.container{max-width:720px;margin:12px auto;padding:12px;background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.5)}
h1{color:var(--brand);font-size:16px;text-align:center;margin:6px 0 12px 0;}
label{display:block;color:#e6e6e6;font-weight:600;margin-top:8px;font-size:14px;}
input,textarea{width:100%;padding:12px;border-radius:10px;border:0;background:#1b1b1b;color:#fff;box-sizing:border-box;font-size:16px}
.start-btn{margin-top:12px;background:var(--brand);color:#08120a;border-radius:10px;padding:14px;font-weight:800;font-size:16px;width:100%;border:0}
.item-img{width:100%;border-radius:10px;margin-top:12px;display:block}
.btn-row{display:flex;gap:10px;margin-top:12px}
.btn{flex:1;padding:14px;border-radius:10px;border:0;font-weight:800;font-size:16px}
.btn-ok{background:var(--ok);color:#fff}
.btn-no{background:var(--no);color:#fff}
.btn.active{box-shadow:0 6px 18px rgba(0,0,0,0.35);transform:scale(1.02)}
.counter{text-align:center;color:var(--muted);margin-top:10px;font-size:14px}
.footer-note{font-size:13px;color:#9b9b9b;margin-top:8px}
.desc-area{margin-top:12px}
.next-btn{margin-top:10px;background:var(--brand);color:#08120a;padding:12px;border-radius:10px;border:0;font-weight:800;width:100%}
#btn-pdf{margin-top:12px;padding:14px;border-radius:10px;border:0;background:var(--brand);color:#08120a;font-weight:800;width:100%}
@media (max-width:420px){.btn{padding:12px;font-size:15px}.start-btn{padding:12px;font-size:15px}.header img{height:40px}}
</style>
</head>
<body>
<div class="header">
<img src="assets/logo_checklist_log20.png" alt="logo"/>
<div>LOG20 OPERAÇÃO VIDROS</div>
</div>

<div id="page-start" class="container">
  <h1>Checklist Diário — Empilhadeira Elétrica</h1>
  <label>Nome do Operador</label>
  <input id="operador" type="text" inputmode="text" autocomplete="name" placeholder="Nome do operador"/>
  <label>Número da Máquina</label>
  <input id="maquina" type="text" inputmode="numeric" placeholder="Número da máquina"/>
  <label>Horímetro</label>
  <input id="horimetro" type="number" inputmode="decimal" step="0.1" placeholder="ex: 3456.7"/>
  <button class="start-btn" id="start" onclick="startChecklist()">Iniciar Checklist</button>
  <div class="footer-note">Arquivo 100% offline — instale via navegador (Adicionar à tela inicial) para modo app (tela cheia).</div>
</div>

<div id="page-check" class="container" style="display:none">
  <h1 id="item-title">Item</h1>
  <img id="item-img" class="item-img" src="" alt="imagem do item">
  <div class="btn-row">
    <button id="btn-yes" class="btn btn-ok" onclick="answer('Sim')">Sim</button>
    <button id="btn-no" class="btn btn-no" onclick="answer('Não')">Não</button>
  </div>
  <div id="desc-wrap" class="desc-area" style="display:none">
    <label>Descreva o problema</label>
    <textarea id="desc" placeholder="Descreva o problema..."></textarea>
    <button class="next-btn" onclick="nextItem()">Próximo</button>
  </div>
  <div class="counter" id="counter">Item 1 de 21</div>
</div>

<div id="page-obs" class="container" style="display:none">
  <h1>Observações Finais</h1>
  <label>Observações</label>
  <textarea id="observacoes" placeholder="Observações gerais..."></textarea>
  <button id="btn-pdf" onclick="generatePDF()" disabled>⏳ Aguarde 3:00 para gerar PDF</button>
  <div class="footer-note">Itens marcados como "Não" precisam de descrição.</div>
</div>

<div id="page-done" class="container" style="display:none">
  <h1>✅ Checklist Finalizado</h1>
  <div style="text-align:center;color:#cfcfcf">Relatório gerado e baixado.</div>
  <button class="start-btn" onclick="location.reload()">Voltar ao início</button>
</div>

<script>
// Embedded items and images (SVG data URIs)
const items = ["Pontos de apoio estão OK?", "Painel de instrumentos está OK?", "Sensor de banco está OK?", "Cinto de segurança está OK?", "Buzina está OK?", "Sensor de cinto está OK?", "Limpador de para-brisas está OK?", "Para-brisa e teto estão OK?", "Retrovisores estão OK?", "Freios estão OK?", "Extintor está OK?", "LEDs laterais estão OK?", "Blue Spot está OK?", "Lâmpadas dianteiras estão OK?", "Lâmpadas traseiras estão OK?", "Sirene de ré está OK?", "Ausência de vazamento de óleo?", "Mangueiras da torre estão OK?", "Garfo está OK?", "Pneus estão OK?", "Rodas estão OK?"];
const images = ["data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE6IFBvbnRvcyBkZSBhcG9pbyBlc3TDo28gT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDI6IFBhaW5lbCBkZSBpbnN0cnVtZW50b3MgZXN0w6EgT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDM6IFNlbnNvciBkZSBiYW5jbyBlc3TDoSBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDQ6IENpbnRvIGRlIHNlZ3VyYW7Dp2EgZXN0w6EgT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDU6IEJ1emluYSBlc3TDoSBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDY6IFNlbnNvciBkZSBjaW50byBlc3TDoSBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDc6IExpbXBhZG9yIGRlIHBhcmEtYnJpc2FzIGVzdMOhIE9LPzwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUyJSIgZmlsbD0iI2RkZCIgZm9udC1zaXplPSIyMCI+RW1waWxoYWRlaXJhIGVsw6l0cmljYSBIYW5jaGEg4oCUIE9wZXJhw6fDo28gVmlkcm9zPC90ZXh0PjxyZWN0IHg9IjQ0MCIgeT0iNDIwIiByeD0iMTIiIHJ5PSIxMiIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI3MCIgZmlsbD0iI2Y1ODIyMCIvPjx0ZXh0IHg9IjYwMCIgeT0iNDY1IiBmaWxsPSIjMDgxMjBhIiBmb250LXNpemU9IjI4IiBmb250LXdlaWdodD0iODAwIj5DSEVDS0xJU1QgTE9HMjA8L3RleHQ+PC9nPjwvc3ZnPg==", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDg6IFBhcmEtYnJpc2EgZSB0ZXRvIGVzdMOjbyBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDk6IFJldHJvdmlzb3JlcyBlc3TDo28gT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDEwOiBGcmVpb3MgZXN0w6NvIE9LPzwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUyJSIgZmlsbD0iI2RkZCIgZm9udC1zaXplPSIyMCI+RW1waWxoYWRlaXJhIGVsw6l0cmljYSBIYW5jaGEg4oCUIE9wZXJhw6fDo28gVmlkcm9zPC90ZXh0PjxyZWN0IHg9IjQ0MCIgeT0iNDIwIiByeD0iMTIiIHJ5PSIxMiIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI3MCIgZmlsbD0iI2Y1ODIyMCIvPjx0ZXh0IHg9IjYwMCIgeT0iNDY1IiBmaWxsPSIjMDgxMjBhIiBmb250LXNpemU9IjI4IiBmb250LXdlaWdodD0iODAwIj5DSEVDS0xJU1QgTE9HMjA8L3RleHQ+PC9nPjwvc3ZnPg==", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDExOiBFeHRpbnRvciBlc3TDoSBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDEyOiBMRURzIGxhdGVyYWlzIGVzdMOjbyBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDEzOiBCbHVlIFNwb3QgZXN0w6EgT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE0OiBMw6JtcGFkYXMgZGlhbnRlaXJhcyBlc3TDo28gT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE1OiBMw6JtcGFkYXMgdHJhc2VpcmFzIGVzdMOjbyBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE2OiBTaXJlbmUgZGUgcsOpIGVzdMOhIE9LPzwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUyJSIgZmlsbD0iI2RkZCIgZm9udC1zaXplPSIyMCI+RW1waWxoYWRlaXJhIGVsw6l0cmljYSBIYW5jaGEg4oCUIE9wZXJhw6fDo28gVmlkcm9zPC90ZXh0PjxyZWN0IHg9IjQ0MCIgeT0iNDIwIiByeD0iMTIiIHJ5PSIxMiIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI3MCIgZmlsbD0iI2Y1ODIyMCIvPjx0ZXh0IHg9IjYwMCIgeT0iNDY1IiBmaWxsPSIjMDgxMjBhIiBmb250LXNpemU9IjI4IiBmb250LXdlaWdodD0iODAwIj5DSEVDS0xJU1QgTE9HMjA8L3RleHQ+PC9nPjwvc3ZnPg==", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE3OiBBdXPDqm5jaWEgZGUgdmF6YW1lbnRvIGRlIMOzbGVvPzwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUyJSIgZmlsbD0iI2RkZCIgZm9udC1zaXplPSIyMCI+RW1waWxoYWRlaXJhIGVsw6l0cmljYSBIYW5jaGEg4oCUIE9wZXJhw6fDo28gVmlkcm9zPC90ZXh0PjxyZWN0IHg9IjQ0MCIgeT0iNDIwIiByeD0iMTIiIHJ5PSIxMiIgd2lkdGg9IjMyMCIgaGVpZ2h0PSI3MCIgZmlsbD0iI2Y1ODIyMCIvPjx0ZXh0IHg9IjYwMCIgeT0iNDY1IiBmaWxsPSIjMDgxMjBhIiBmb250LXNpemU9IjI4IiBmb250LXdlaWdodD0iODAwIj5DSEVDS0xJU1QgTE9HMjA8L3RleHQ+PC9nPjwvc3ZnPg==", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE4OiBNYW5ndWVpcmFzIGRhIHRvcnJlIGVzdMOjbyBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDE5OiBHYXJmbyBlc3TDoSBPSz88L3RleHQ+PHRleHQgeD0iNTAlIiB5PSI1MiUiIGZpbGw9IiNkZGQiIGZvbnQtc2l6ZT0iMjAiPkVtcGlsaGFkZWlyYSBlbMOpdHJpY2EgSGFuY2hhIOKAlCBPcGVyYcOnw6NvIFZpZHJvczwvdGV4dD48cmVjdCB4PSI0NDAiIHk9IjQyMCIgcng9IjEyIiByeT0iMTIiIHdpZHRoPSIzMjAiIGhlaWdodD0iNzAiIGZpbGw9IiNmNTgyMjAiLz48dGV4dCB4PSI2MDAiIHk9IjQ2NSIgZmlsbD0iIzA4MTIwYSIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9IjgwMCI+Q0hFQ0tMSVNUIExPRzIwPC90ZXh0PjwvZz48L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDIwOiBQbmV1cyBlc3TDo28gT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+", "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjAwIiBoZWlnaHQ9IjY0MCIgdmlld0JveD0iMCAwIDEyMDAgNjQwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMTIxZDEyIi8+PGcgZm9udC1mYW1pbHk9IkhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjx0ZXh0IHg9IjUwJSIgeT0iMzYlIiBmaWxsPSIjZmZmIiBmb250LXNpemU9IjQ0IiBmb250LXdlaWdodD0iNzAwIj5JdGVtIDIxOiBSb2RhcyBlc3TDo28gT0s/PC90ZXh0Pjx0ZXh0IHg9IjUwJSIgeT0iNTIlIiBmaWxsPSIjZGRkIiBmb250LXNpemU9IjIwIj5FbXBpbGhhZGVpcmEgZWzDqXRyaWNhIEhhbmNoYSDigJQgT3BlcmHDp8OjbyBWaWRyb3M8L3RleHQ+PHJlY3QgeD0iNDQwIiB5PSI0MjAiIHJ4PSIxMiIgcnk9IjEyIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjU4MjIwIi8+PHRleHQgeD0iNjAwIiB5PSI0NjUiIGZpbGw9IiMwODEyMGEiIGZvbnQtc2l6ZT0iMjgiIGZvbnQtd2VpZ2h0PSI4MDAiPkNIRUNLTElTVCBMT0cyMDwvdGV4dD48L2c+PC9zdmc+"];
let index = 0;
const respostas = {};
const descricoes = {};
let timer = null;
let timeLeft = 180;

function startChecklist(){
  const op = document.getElementById('operador').value.trim();
  const ma = document.getElementById('maquina').value.trim();
  const ho = document.getElementById('horimetro').value.trim();
  if(!op || !ma || !ho){ alert('Preencha todos os campos'); return; }
  // show next page
  document.getElementById('page-start').style.display='none';
  document.getElementById('page-check').style.display='block';
  index = 0;
  showItem(0);
  startTimer();
  document.activeElement.blur();
}

function showItem(i){
  index = i;
  document.getElementById('item-title').innerText = items[i];
  document.getElementById('item-img').src = images[i];
  document.getElementById('desc-wrap').style.display='none';
  document.getElementById('desc').value = descricoes[items[i]]||'';
  document.getElementById('counter').innerText = `Item ${i+1} de ${items.length}`;
  document.getElementById('btn-yes').classList.remove('active');
  document.getElementById('btn-no').classList.remove('active');
}

function answer(val){
  const item = items[index];
  respostas[item]=val;
  if(val==='Sim'){
    document.getElementById('btn-yes').classList.add('active');
    document.getElementById('btn-no').classList.remove('active');
    setTimeout(()=>{ nextItem(); },250);
  } else {
    document.getElementById('btn-no').classList.add('active');
    document.getElementById('btn-yes').classList.remove('active');
    document.getElementById('desc-wrap').style.display='block';
    document.getElementById('desc').focus();
  }
}

function nextItem(){
  const item = items[index];
  if(respostas[item]==='Não'){
    const d = document.getElementById('desc').value.trim();
    if(!d){ alert('Descreva o problema antes de prosseguir.'); document.getElementById('desc').focus(); return; }
    descricoes[item]=d;
  }
  if(index+1 < items.length){
    showItem(index+1);
  } else {
    document.getElementById('page-check').style.display='none';
    document.getElementById('page-obs').style.display='block';
    document.getElementById('observacoes').focus();
  }
}

function startTimer(){
  const btn = document.getElementById('btn-pdf');
  timeLeft = 180;
  btn.disabled=true;
  btn.innerText = '⏳ Aguarde 3:00 para gerar PDF';
  timer = setInterval(()=>{ timeLeft--; const m=Math.floor(timeLeft/60); const s=(timeLeft%60).toString().padStart(2,'0'); btn.innerText=`⏳ Aguarde ${m}:${s} para gerar PDF`; if(timeLeft<=0){ clearInterval(timer); btn.disabled=false; btn.innerText='✅ Gerar Relatório (PDF)'; } },1000);
}

function generatePDF(){
  if(timeLeft>0){ alert('Aguarde o tempo mínimo de 3 minutos para gerar o relatório.'); return; }
  // use jsPDF from CDN if available; else alert user to connect once to cache
  if(!window.jspdf){ alert('Biblioteca jsPDF não encontrada localmente. Conecte-se à internet uma vez para instalar ou peça a versão "com jsPDF embutido".'); return; }
  const {{ jsPDF }} = window.jspdf;
  const doc = new jsPDF({unit:'pt', format:'a4'});
  const operador = document.getElementById('operador').value.trim();
  const maquina = document.getElementById('maquina').value.trim();
  const horimetro = document.getElementById('horimetro').value.trim();
  const observ = document.getElementById('observacoes').value.trim();
  doc.text('LOG20 – Operação Vidros', doc.internal.pageSize.getWidth()/2, 40, {{align:'center'}});
  doc.setFontSize(10);
  doc.text(`Operador: ${operador} | Máquina: ${maquina} | Horímetro: ${horimetro}`, 40, 60);
  const body = items.map(i => [i, respostas[i]||'Não respondido', descricoes[i]||'']);
  if(doc.autoTable){ 
    doc.autoTable({startY:80, head:[['Item','Situação','Descrição']], body: body, styles:{fontSize:9,cellPadding:3}, headStyles:{fillColor:[245,130,32]}});
    doc.text('Observações Finais:', 40, doc.lastAutoTable.finalY + 30);
    const lines = doc.splitTextToSize(observ||'Nenhuma observação.', 500);
    doc.text(lines, 40, doc.lastAutoTable.finalY + 45);
  } else {
    let y=80;
    doc.setFontSize(9);
    body.forEach(r => { doc.text(r.join(' - '), 40, y); y+=14; if(y>700){ doc.addPage(); y=40; } });
    doc.text('Observações Finais:', 40, y+20);
    doc.text(observ||'Nenhuma observação.', 40, y+36);
  }
  const filename = `Checklist_LOG20_VIDROS_${operador || 'Operador'}.pdf`;
  doc.save(filename);
  document.getElementById('page-obs').style.display='none';
  document.getElementById('page-done').style.display='block';
}

// register service worker if supported
if('serviceWorker' in navigator){ 
  navigator.serviceWorker.register('service-worker.js').catch(()=>{console.log('SW registration failed');});
}
</script>
</body>
</html>
